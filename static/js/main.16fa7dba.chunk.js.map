{"version":3,"sources":["firebase/config.js","hooks/useFirestore.js","Context/AuthProvider.js","Context/AppProvider.js","firebase/services.js","components/ChatRoom/components/Message.jsx","components/ChatRoom/components/ChatWindow.jsx","components/ChatRoom/components/RoomList.jsx","components/ChatRoom/components/UserInfo.jsx","components/ChatRoom/components/SideBar.jsx","components/ChatRoom/index.jsx","components/Login/index.jsx","components/Modals/AddRoomModal.jsx","components/Modals/InviteMemberModal.jsx","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","auth","db","firestore","useFirestore","collection","condition","React","useState","documents","setDocuments","useEffect","collectionRef","orderBy","compareValue","length","where","fieldName","operator","onSnapshot","snapshot","docs","map","doc","data","id","AuthContext","createContext","SpinStyled","styled","Spin","AuthProvider","children","user","setUser","isLoading","setIsLoading","history","useHistory","console","log","unsubscribed","onAuthStateChanged","displayName","email","uid","photoURL","push","Provider","value","AppContext","AppProvider","isAddRoomVisible","setIsAddRoomVisible","isInviteMemberVisible","setIsInviteMemberVisible","selectedRoomId","setSelectedRoomId","useContext","roomConditions","useMemo","rooms","selectedRoom","find","room","userConditions","members","addDocument","add","createdAt","FieldValue","serverTimestamp","generateKeywords","name","split","filter","word","flagArray","result","stringArray","i","findPermutation","k","join","reduce","acc","cur","words","arrName","curName","forEach","letter","createKeywords","WrapperStyled","div","Message","text","size","src","Text","className","HeaderStyled","ButtonGroupStyled","ContentStyled","FormStyled","Form","MessageListStyled","ChatWindow","props","inputValue","setInputValue","useForm","form","handleOnSubmit","roomId","resetFields","messageConditions","messages","description","icon","UserAddOutlined","type","onClick","Group","maxCount","member","title","charAt","toUpperCase","message","seconds","Item","placeholder","bordered","autoComplete","onChange","e","target","onPressEnter","showIcon","style","margin","Panel","Collapse","PanelStyled","LinkStyled","Typography","Link","RoomList","ghost","defaultActiveKey","header","PlusCircleOutlined","UserInfo","signOut","SidebarStyled","SideBar","span","ChatRoom","fbProvider","FacebookAuthProvider","Row","Login","handleFacebookLogin","a","signInWithPopup","additionalUserInfo","isNewUser","providerId","keywords","Title","textAlign","color","level","width","FacebookOutlined","twoToneColor","AddRoomModal","visible","onOk","getFieldValue","onCancel","layout","label","TextArea","DebounceSelect","fetchOptions","debounceTimeout","curMembers","fetching","setFetching","options","setOptions","debounceFetcher","debounce","then","newOptions","labelInValue","filterOption","onSearch","notFoundContent","opt","Option","fetchUserList","search","toLowerCase","limit","get","includes","InviteMemberModal","setValue","update","val","destroyOnClose","mode","newValue","App","component","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.16fa7dba.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\n\r\nimport \"firebase/analytics\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyDhcxx2XJmO73jxj5LoNxtbHJ-hX3sSA8g\",\r\n\tauthDomain: \"chat-app-bf6f7.firebaseapp.com\",\r\n\tprojectId: \"chat-app-bf6f7\",\r\n\tstorageBucket: \"chat-app-bf6f7.appspot.com\",\r\n\tmessagingSenderId: \"457034179264\",\r\n\tappId: \"1:457034179264:web:da19308b3ab4ff9b064325\",\r\n\tmeasurementId: \"G-SJTRLM3FDW\",\r\n};\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\nfirebase.analytics();\r\n\r\nconst auth = firebase.auth();\r\nconst db = firebase.firestore();\r\n\r\n// auth.useEmulator(\"http://localhost:9099\");\r\n// if (window.location.hostname === \"localhost\") {\r\n// \tdb.useEmulator(\"localhost\", \"8080\");\r\n// }\r\n\r\nexport { auth, db };\r\nexport default firebase;\r\n","import React from \"react\";\r\nimport { db } from \"../firebase/config\";\r\n\r\nconst useFirestore = (collection, condition) => {\r\n\tconst [documents, setDocuments] = React.useState([]);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tlet collectionRef = db.collection(collection).orderBy(\"createdAt\");\r\n\t\t/*condition.\r\n            {\r\n                fieldName: 'abc',\r\n                operator: 'in,\r\n                compareValue :['abc','def']\r\n             }\r\n        */\r\n\t\tif (condition) {\r\n\t\t\tif (!condition.compareValue || !condition.compareValue.length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcollectionRef = collectionRef.where(\r\n\t\t\t\tcondition.fieldName,\r\n\t\t\t\tcondition.operator,\r\n\t\t\t\tcondition.compareValue,\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst unsubscribed = collectionRef.onSnapshot((snapshot) => {\r\n\t\t\tconst documents = snapshot.docs.map((doc) => ({ ...doc.data(), id: doc.id }));\r\n\r\n\t\t\tsetDocuments(documents);\r\n\t\t});\r\n\r\n\t\treturn unsubscribed;\r\n\t}, [collection, condition]);\r\n\r\n\treturn documents;\r\n};\r\n\r\nexport default useFirestore;\r\n","import { Spin } from \"antd\";\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport { auth } from \"../firebase/config\";\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nconst SpinStyled = styled(Spin)`\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\tleft: 50%;\r\n\ttransform: translate(-50%, -50%);\r\n`;\r\n\r\nfunction AuthProvider({ children }) {\r\n\tconst [user, setUser] = React.useState({});\r\n\tconst [isLoading, setIsLoading] = React.useState(true);\r\n\tconst history = useHistory();\r\n\tconsole.log(\"history\", history);\r\n\tconst x = 1;\r\n\tReact.useEffect(() => {\r\n\t\tconst unsubscribed = auth.onAuthStateChanged((user) => {\r\n\t\t\tif (user) {\r\n\t\t\t\tconst { displayName, email, uid, photoURL } = user;\r\n\t\t\t\tsetUser({\r\n\t\t\t\t\tdisplayName,\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tuid,\r\n\t\t\t\t\tphotoURL,\r\n\t\t\t\t});\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\thistory.push(\"/\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetIsLoading(false);\r\n\t\t\thistory.push(\"/login\");\r\n\t\t\tconsole.log(x);\r\n\t\t});\r\n\r\n\t\t//Clean function\r\n\t\treturn () => {\r\n\t\t\tunsubscribed();\r\n\t\t};\r\n\t}, [history]);\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider value={{ user }}>\r\n\t\t\t{isLoading ? <SpinStyled /> : children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n}\r\n\r\nexport default AuthProvider;\r\n","import React from \"react\";\r\nimport useFirestore from \"../hooks/useFirestore\";\r\nimport { AuthContext } from \"./AuthProvider\";\r\n\r\nexport const AppContext = React.createContext();\r\n\r\nfunction AppProvider({ children }) {\r\n\tconst [isAddRoomVisible, setIsAddRoomVisible] = React.useState(false);\r\n\tconst [isInviteMemberVisible, setIsInviteMemberVisible] = React.useState(false);\r\n\tconst [selectedRoomId, setSelectedRoomId] = React.useState(\"\");\r\n\r\n\tconst {\r\n\t\tuser: { uid },\r\n\t} = React.useContext(AuthContext);\r\n\r\n\tconst roomConditions = React.useMemo(() => {\r\n\t\treturn {\r\n\t\t\tfieldName: \"members\",\r\n\t\t\toperator: \"array-contains\",\r\n\t\t\tcompareValue: uid,\r\n\t\t};\r\n\t}, [uid]);\r\n\r\n\tconst rooms = useFirestore(\"rooms\", roomConditions);\r\n\r\n\tconst selectedRoom = React.useMemo(() => {\r\n\t\treturn rooms.find((room) => room.id === selectedRoomId) || {};\r\n\t}, [rooms, selectedRoomId]);\r\n\r\n\tconst userConditions = React.useMemo(() => {\r\n\t\treturn {\r\n\t\t\tfieldName: \"uid\",\r\n\t\t\toperator: \"in\",\r\n\t\t\tcompareValue: selectedRoom?.members,\r\n\t\t};\r\n\t}, [selectedRoom]);\r\n\r\n\tconst members = useFirestore(\"users\", userConditions);\r\n\r\n\treturn (\r\n\t\t<AppContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\trooms,\r\n\t\t\t\tmembers,\r\n\t\t\t\tisAddRoomVisible,\r\n\t\t\t\tsetIsAddRoomVisible,\r\n\t\t\t\tselectedRoomId,\r\n\t\t\t\tsetSelectedRoomId,\r\n\t\t\t\tselectedRoom,\r\n\t\t\t\tisInviteMemberVisible,\r\n\t\t\t\tsetIsInviteMemberVisible,\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</AppContext.Provider>\r\n\t);\r\n}\r\n\r\nexport default AppProvider;\r\n","import firebase, { db } from \"./config\";\r\n\r\nexport const addDocument = (collection, data) => {\r\n\tconst query = db.collection(collection);\r\n\tquery.add({ ...data, createdAt: firebase.firestore.FieldValue.serverTimestamp() });\r\n};\r\n\r\n\r\n// tao keywords cho displayName, su dung cho search\r\nexport const generateKeywords = (displayName) => {\r\n\t// liet ke tat cac hoan vi. vd: name = [\"David\", \"Van\", \"Teo\"]\r\n\t// => [\"David\", \"Van\", \"Teo\"], [\"David\", \"Teo\", \"Van\"], [\"Teo\", \"David\", \"Van\"],...\r\n\tconst name = displayName.split(' ').filter((word) => word);\r\n  \r\n\tconst length = name.length;\r\n\tlet flagArray = [];\r\n\tlet result = [];\r\n\tlet stringArray = [];\r\n  \r\n\t/**\r\n\t * khoi tao mang flag false\r\n\t * dung de danh dau xem gia tri\r\n\t * tai vi tri nay da duoc su dung\r\n\t * hay chua\r\n\t **/\r\n\tfor (let i = 0; i < length; i++) {\r\n\t  flagArray[i] = false;\r\n\t}\r\n  \r\n\tconst createKeywords = (name) => {\r\n\t  const arrName = [];\r\n\t  let curName = '';\r\n\t  name.split('').forEach((letter) => {\r\n\t\tcurName += letter;\r\n\t\tarrName.push(curName);\r\n\t  });\r\n\t  return arrName;\r\n\t};\r\n  \r\n\tfunction findPermutation(k) {\r\n\t  for (let i = 0; i < length; i++) {\r\n\t\tif (!flagArray[i]) {\r\n\t\t  flagArray[i] = true;\r\n\t\t  result[k] = name[i];\r\n  \r\n\t\t  if (k === length - 1) {\r\n\t\t\tstringArray.push(result.join(' '));\r\n\t\t  }\r\n  \r\n\t\t  findPermutation(k + 1);\r\n\t\t  flagArray[i] = false;\r\n\t\t}\r\n\t  }\r\n\t}\r\n  \r\n\tfindPermutation(0);\r\n  \r\n\tconst keywords = stringArray.reduce((acc, cur) => {\r\n\t  const words = createKeywords(cur);\r\n\t  return [...acc, ...words];\r\n\t}, []);\r\n  \r\n\treturn keywords;\r\n  };","import { Avatar, Typography } from \"antd\";\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst WrapperStyled = styled.div`\r\n    padding: 15px;\r\n\tmargin-bottom: 10px;\r\n\r\n\t.author {\r\n\t\tmargin-left: 5px;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.date {\r\n\t\tmargin-left: 10px;\r\n\t\tfont-size: 11px;\r\n\t\tcolor: #a7a7a7;\r\n\t}\r\n\r\n\t.content {\r\n\t\tmargin-left: 38px;\r\n\t}\r\n`;\r\n\r\nfunction Message({ text, displayName, createdAt, photoURL }) {\r\n\treturn (\r\n\t\t<WrapperStyled>\r\n\t\t\t<div>\r\n\t\t\t\t<Avatar size=\"small\" src={photoURL}>A</Avatar>\r\n\t\t\t\t<Typography.Text className=\"author\">{displayName}</Typography.Text>\r\n\t\t\t\t<Typography.Text className=\"date\">{createdAt}</Typography.Text>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<Typography.Text className=\"content\">{text}</Typography.Text>\r\n\t\t\t</div>\r\n\t\t</WrapperStyled>\r\n\t);\r\n}\r\n\r\nexport default Message;\r\n","import { UserAddOutlined } from \"@ant-design/icons\";\r\nimport { Alert, Avatar, Button, Form, Input, Tooltip } from \"antd\";\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { AppContext } from \"../../../Context/AppProvider\";\r\nimport { AuthContext } from \"../../../Context/AuthProvider\";\r\nimport { addDocument } from \"../../../firebase/services\";\r\nimport useFirestore from \"../../../hooks/useFirestore\";\r\nimport Message from \"./Message\";\r\n\r\nconst WrapperStyled = styled.div`\r\n\theight: 100vh;\r\n`;\r\n\r\nconst HeaderStyled = styled.div`\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\theight: 56px;\r\n\tpadding: 0 16px;\r\n\talign-items: center;\r\n\tborder-bottom: 1px solid rgb(230, 230, 230);\r\n\r\n\t.header {\r\n\t\t&__info {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\r\n\t\t&__title {\r\n\t\t\tmargin: 0;\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\r\n\t\t&__desc {\r\n\t\t\tfont-size: 12px;\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nconst ButtonGroupStyled = styled.div`\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n`;\r\n\r\nconst ContentStyled = styled.div`\r\n\theight: calc(100% - 56px);\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: flex-end;\r\n`;\r\n\r\nconst FormStyled = styled(Form)`\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 2px 2px 2px 0px;\r\n\tborder: 1px solid rgba(230, 230, 230);\r\n\tborder-radius: 2px;\r\n\r\n\t.ant-form-item {\r\n\t\tflex: 1;\r\n\t\tmargin-bottom: 0;\r\n\t\tpadding: 10px;\r\n\t}\r\n`;\r\n\r\nconst MessageListStyled = styled.div`\r\n\tmax-height: 100%;\r\n\toverflow-y: scroll;\r\n`;\r\nfunction ChatWindow(props) {\r\n\tconst { selectedRoom, members, setIsInviteMemberVisible } = React.useContext(AppContext);\r\n\tconst {\r\n\t\tuser: { uid, photoURL, displayName },\r\n\t} = React.useContext(AuthContext);\r\n\r\n\tconst [inputValue, setInputValue] = React.useState(\"\");\r\n\tconst [form] = Form.useForm();\r\n\r\n\tconst handleInputChange = (e) => {\r\n\t\tsetInputValue(e.target.value);\r\n\t};\r\n\r\n\tconst handleOnSubmit = () => {\r\n\t\taddDocument(\"messages\", {\r\n\t\t\ttext: inputValue,\r\n\t\t\tuid,\r\n\t\t\tphotoURL,\r\n\t\t\troomId: selectedRoom.id,\r\n\t\t\tdisplayName,\r\n\t\t});\r\n\t\tform.resetFields([\"message\"]);\r\n\t};\r\n\r\n\tconst messageConditions = React.useMemo(() => {\r\n\t\treturn {\r\n\t\t\tfieldName: \"roomId\",\r\n\t\t\toperator: \"==\",\r\n\t\t\tcompareValue: selectedRoom.id,\r\n\t\t};\r\n\t}, [selectedRoom.id]);\r\n\r\n\tconst messages = useFirestore(\"messages\", messageConditions);\r\n\r\n\treturn (\r\n\t\t<WrapperStyled>\r\n\t\t\t{selectedRoom?.id ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<HeaderStyled>\r\n\t\t\t\t\t\t<div className=\"header__info\">\r\n\t\t\t\t\t\t\t<p className=\"header__title\"> {selectedRoom?.name}</p>\r\n\t\t\t\t\t\t\t<span className=\"header__desc\">{selectedRoom?.description}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ButtonGroupStyled>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ticon={<UserAddOutlined />}\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tonClick={() => setIsInviteMemberVisible(true)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tMời\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Avatar.Group size=\"small\" maxCount={2}>\r\n\t\t\t\t\t\t\t\t{members.map((member) => (\r\n\t\t\t\t\t\t\t\t\t<Tooltip key={member.id} title={member.displayName}>\r\n\t\t\t\t\t\t\t\t\t\t<Avatar src={members.photoURL}>\r\n\t\t\t\t\t\t\t\t\t\t\t{members.photoURL ? \"\" : member.displayName?.charAt(0).toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Avatar.Group>\r\n\t\t\t\t\t\t</ButtonGroupStyled>\r\n\t\t\t\t\t</HeaderStyled>\r\n\t\t\t\t\t<ContentStyled>\r\n\t\t\t\t\t\t<MessageListStyled>\r\n\t\t\t\t\t\t\t{messages.map((message) => (\r\n\t\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\t\tkey={message.id}\r\n\t\t\t\t\t\t\t\t\ttext={message.text}\r\n\t\t\t\t\t\t\t\t\tdisplayName={message.displayName}\r\n\t\t\t\t\t\t\t\t\tcreatedAt={message.createdAt?.seconds}\r\n\t\t\t\t\t\t\t\t\tphotoURL={message.photoURL}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</MessageListStyled>\r\n\t\t\t\t\t\t<FormStyled form={form}>\r\n\t\t\t\t\t\t\t<Form.Item name=\"message\">\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Nhập tin nhắn...\"\r\n\t\t\t\t\t\t\t\t\tbordered={false}\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\t\tonPressEnter={handleOnSubmit}\r\n\t\t\t\t\t\t\t\t\tvalue={inputValue}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Button type=\"primary\" onClick={handleOnSubmit}>\r\n\t\t\t\t\t\t\t\tGửi\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</FormStyled>\r\n\t\t\t\t\t</ContentStyled>{\" \"}\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<Alert\r\n\t\t\t\t\tmessage=\"Hãy chọn phòng để bắt đầu chat\"\r\n\t\t\t\t\ttype=\"info\"\r\n\t\t\t\t\tshowIcon\r\n\t\t\t\t\tstyle={{ margin: \"5px\" }}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</WrapperStyled>\r\n\t);\r\n}\r\n\r\nexport default ChatWindow;\r\n","import { PlusCircleOutlined } from \"@ant-design/icons\";\r\nimport { Button, Collapse, Typography } from \"antd\";\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { AppContext } from \"../../../Context/AppProvider\";\r\n\r\nconst { Panel } = Collapse;\r\n\r\nconst PanelStyled = styled(Panel)`\r\n\t&&& {\r\n\t\t.ant-collapse-header,\r\n\t\tp {\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\r\n\t\t.ant-collapse-content-box {\r\n\t\t\tpadding: 0 40px;\r\n\t\t}\r\n\r\n\t\t.add-room {\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\t\t.ant-btn {\r\n\t\t\tcolor: #000;\r\n\t\t\tmargin-top: 50px;\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nconst LinkStyled = styled(Typography.Link)`\r\n\t&&& {\r\n\t\tdisplay: block;\r\n\t\tmargin-bottom: 5px;\r\n\t\tcolor: #fff;\r\n\t}\r\n`;\r\n\r\nfunction RoomList(props) {\r\n\tconst { rooms, setIsAddRoomVisible, setSelectedRoomId } = React.useContext(AppContext);\r\n\tconst handleAddRoom = () => {\r\n\t\tsetIsAddRoomVisible(true);\r\n\t};\r\n\treturn (\r\n\t\t<Collapse ghost defaultActiveKey={\"1\"}>\r\n\t\t\t<PanelStyled header=\"Danh sách các phòng\" key=\"1\">\r\n\t\t\t\t{rooms.map((room) => (\r\n\t\t\t\t\t<LinkStyled key={room.id} onClick={() => setSelectedRoomId(room.id)}>\r\n\t\t\t\t\t\t{room.name}\r\n\t\t\t\t\t</LinkStyled>\r\n\t\t\t\t))}\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype=\"dashed\"\r\n\t\t\t\t\ticon={<PlusCircleOutlined />}\r\n\t\t\t\t\tclassName=\"add-room\"\r\n\t\t\t\t\tonClick={handleAddRoom}\r\n\t\t\t\t>\r\n\t\t\t\t\tThêm phòng\r\n\t\t\t\t</Button>\r\n\t\t\t</PanelStyled>\r\n\t\t</Collapse>\r\n\t);\r\n}\r\n\r\nexport default RoomList;\r\n","import { Avatar, Button, Typography } from \"antd\";\r\nimport React, { useContext } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { AuthContext } from \"../../../Context/AuthProvider\";\r\nimport { auth } from \"../../../firebase/config\";\r\n\r\nconst WrapperStyled = styled.div`\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\tpadding: 12px 16px;\r\n\tborder-bottom: 1px solid rgba(82, 38, 83);\r\n\r\n\t.username {\r\n\t\tcolor: #fff;\r\n\t\tmargin-left: 5px;\r\n\t}\r\n`;\r\n\r\nfunction UserInfo(props) {\r\n\r\n\r\n\tconst {\r\n\t\tuser: { displayName, photoURL },\r\n\t} = useContext(AuthContext);\r\n\r\n\treturn (\r\n\t\t<WrapperStyled>\r\n\t\t\t<div>\r\n\t\t\t\t<Avatar src={photoURL}>{photoURL ? \"\" : displayName?.charAt(0).toUpperCase()}</Avatar>\r\n\t\t\t\t<Typography.Text className=\"username\">{displayName}</Typography.Text>\r\n\t\t\t</div>\r\n\t\t\t<Button ghost onClick={() => auth.signOut()}>\r\n\t\t\t\tĐăng Xuất\r\n\t\t\t</Button>\r\n\t\t</WrapperStyled>\r\n\t);\r\n}\r\n\r\nexport default UserInfo;\r\n","import { Col, Row } from \"antd\";\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport RoomList from \"./RoomList\";\r\nimport UserInfo from \"./UserInfo\";\r\n\r\nconst SidebarStyled = styled.div`\r\n\tbackground: #5468ff;\r\n\tcolor: #fff;\r\n\theight: 100vh;\r\n`;\r\n\r\nfunction SideBar(props) {\r\n\treturn (\r\n\t\t<SidebarStyled>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t<UserInfo />\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t<RoomList />\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</SidebarStyled>\r\n\t);\r\n}\r\n\r\nexport default SideBar;\r\n","import { Col, Row } from \"antd\";\r\nimport React from \"react\";\r\nimport ChatWindow from \"./components/ChatWindow\";\r\nimport SideBar from \"./components/SideBar\";\r\n\r\nfunction ChatRoom(props) {\r\n\treturn (\r\n\t\t<Row>\r\n\t\t\t<Col span={6}>\r\n\t\t\t\t<SideBar />\r\n\t\t\t</Col>\r\n\t\t\t<Col span={18}>\r\n\t\t\t\t<ChatWindow />\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t);\r\n}\r\n\r\nexport default ChatRoom;\r\n ","import { FacebookOutlined } from \"@ant-design/icons\";\r\nimport { Button, Col, Row, Typography } from \"antd\";\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport firebase, { auth } from \"../../firebase/config\";\r\nimport { addDocument, generateKeywords } from \"../../firebase/services\";\r\n\r\nconst fbProvider = new firebase.auth.FacebookAuthProvider();\r\n\r\nconst WrapperStyled = styled(Row)`\r\n\tbackground: url(\"https://images.pexels.com/photos/1261728/pexels-photo-1261728.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940\");\r\n\tbackground-size: cover;\r\n\tbackground-repeat: no-repeat;\r\n\theight: 100vh;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\r\n\t.ant-typography{\r\n\t\ttext-shadow: 0 0 5px #a3a3a3;\r\n\t}\r\n\t\r\n`;\r\n\r\nfunction Login(props) {\r\n\tconst handleFacebookLogin = async () => {\r\n\t\tconst { additionalUserInfo, user } = await auth.signInWithPopup(fbProvider);\r\n\t\tif (additionalUserInfo?.isNewUser) {\r\n\t\t\taddDocument(\"users\", {\r\n\t\t\t\tdisplayName: user.displayName,\r\n\t\t\t\temail: user.email,\r\n\t\t\t\tphotoURL: user.photoURL,\r\n\t\t\t\tuid: user.uid,\r\n\t\t\t\tproviderId: additionalUserInfo.providerId,\r\n\t\t\t\tkeywords: generateKeywords(user.displayName),\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<WrapperStyled>\r\n\t\t\t\t<Col span={8}>\r\n\t\t\t\t\t<Typography.Title style={{ textAlign: \"center\" , color: \"white\"}} level={3}>\r\n\t\t\t\t\t\tREACTJS CHAT APP\r\n\t\t\t\t\t</Typography.Title>\r\n\t\t\t\t\t<Button style={{ width: \"100%\" }} size=\"large\" type=\"primary\" onClick={handleFacebookLogin}>\r\n\t\t\t\t\t\t<FacebookOutlined twoToneColor=\"#eb2f96\" /> Đăng nhập bằng Facebook\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Col>\r\n\t\t\t</WrapperStyled>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Login;\r\n","import { Form, Input, Modal } from \"antd\";\r\nimport React from \"react\";\r\nimport { AppContext } from \"../../Context/AppProvider\";\r\nimport { AuthContext } from \"../../Context/AuthProvider\";\r\nimport { addDocument } from \"../../firebase/services\";\r\n\r\nfunction AddRoomModal(props) {\r\n\tconst { isAddRoomVisible, setIsAddRoomVisible } = React.useContext(AppContext);\r\n\tconst {\r\n\t\tuser: { uid },\r\n\t} = React.useContext(AuthContext);\r\n\tconst [form] = Form.useForm();\r\n\r\n\tconst handleOk = () => {\r\n\t\t// logic\r\n\t\taddDocument(\"rooms\", { ...form.getFieldValue(), members: [uid] });\r\n\t\tform.resetFields();\r\n\t\tsetIsAddRoomVisible(false);\r\n\t};\r\n\r\n\tconst handleCancel = () => {\r\n\t\tform.resetFields();\r\n\t\tsetIsAddRoomVisible(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal title=\"Tạo phòng\" visible={isAddRoomVisible} onOk={handleOk} onCancel={handleCancel}>\r\n\t\t\t<Form form={form} layout=\"vertical\">\r\n\t\t\t\t<Form.Item label=\"Tên phòng\" name=\"name\">\r\n\t\t\t\t\t<Input placeholder=\"Nhập tên phòng\" />\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"Mô tả\" name=\"description\">\r\n\t\t\t\t\t<Input.TextArea placeholder=\"Nhập mô tả\" />\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n\r\nexport default AddRoomModal;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { Form, Modal, Select, Spin, Avatar } from \"antd\";\r\nimport { AppContext } from \"../../Context/AppProvider\";\r\nimport { debounce } from \"lodash\";\r\nimport { db } from \"../../firebase/config\";\r\n\r\nfunction DebounceSelect({ fetchOptions, debounceTimeout = 300, curMembers, ...props }) {\r\n\tconst [fetching, setFetching] = useState(false);\r\n\tconst [options, setOptions] = useState([]);\r\n\r\n\tconst debounceFetcher = React.useMemo(() => {\r\n\t\tconst loadOptions = (value) => {\r\n\t\t\tsetOptions([]);\r\n\t\t\tsetFetching(true);\r\n\r\n\t\t\tfetchOptions(value, curMembers).then((newOptions) => {\r\n\t\t\t\tsetOptions(newOptions);\r\n\t\t\t\tsetFetching(false);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn debounce(loadOptions, debounceTimeout);\r\n\t}, [debounceTimeout, fetchOptions, curMembers]);\r\n\r\n\tReact.useEffect(() => {\r\n\t\treturn () => {\r\n\t\t\t// clear when unmount\r\n\t\t\tsetOptions([]);\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<Select\r\n\t\t\tlabelInValue\r\n\t\t\tfilterOption={false}\r\n\t\t\tonSearch={debounceFetcher}\r\n\t\t\tnotFoundContent={fetching ? <Spin size=\"small\" /> : null}\r\n\t\t\t{...props}\r\n\t\t>\r\n\t\t\t{options.map((opt) => (\r\n\t\t\t\t<Select.Option key={opt.value} value={opt.value} title={opt.label}>\r\n\t\t\t\t\t<Avatar size=\"small\" src={opt.photoURL}>\r\n\t\t\t\t\t\t{opt.photoURL ? \"\" : opt.label?.charAt(0)?.toUpperCase()}\r\n\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t{` ${opt.label}`}\r\n\t\t\t\t</Select.Option>\r\n\t\t\t))}\r\n\t\t</Select>\r\n\t);\r\n}\r\n\r\nasync function fetchUserList(search, curMembers) {\r\n\tconsole.log(search?.toLowerCase());\r\n\treturn db\r\n\t\t.collection(\"users\")\r\n\t\t.where(\"keywords\", \"array-contains\", search)\r\n\t\t.orderBy(\"displayName\")\r\n\t\t.limit(20)\r\n\t\t.get()\r\n\t\t.then((snapshot) => {\r\n\t\t\treturn snapshot.docs\r\n\t\t\t\t.map((doc) => ({\r\n\t\t\t\t\tlabel: doc.data().displayName,\r\n\t\t\t\t\tvalue: doc.data().uid,\r\n\t\t\t\t\tphotoURL: doc.data().photoURL,\r\n\t\t\t\t}))\r\n\t\t\t\t.filter((opt) => !curMembers.includes(opt.value));\r\n\t\t});\r\n}\r\n\r\nexport default function InviteMemberModal() {\r\n\tconst { isInviteMemberVisible, setIsInviteMemberVisible, selectedRoomId, selectedRoom } =\r\n\t\tuseContext(AppContext);\r\n\tconst [value, setValue] = useState([]);\r\n\tconst [form] = Form.useForm();\r\n\r\n\tconst handleOk = () => {\r\n\t\t// reset form value\r\n\t\tform.resetFields();\r\n\t\tsetValue([]);\r\n\r\n\t\t// update members in current room\r\n\t\tconst roomRef = db.collection(\"rooms\").doc(selectedRoomId);\r\n\r\n\t\troomRef.update({\r\n\t\t\tmembers: [...selectedRoom.members, ...value.map((val) => val.value)],\r\n\t\t});\r\n\r\n\t\tsetIsInviteMemberVisible(false);\r\n\t};\r\n\r\n\tconst handleCancel = () => {\r\n\t\t// reset form value\r\n\t\tform.resetFields();\r\n\t\tsetValue([]);\r\n\r\n\t\tsetIsInviteMemberVisible(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle=\"Mời thêm thành viên\"\r\n\t\t\t\tvisible={isInviteMemberVisible}\r\n\t\t\t\tonOk={handleOk}\r\n\t\t\t\tonCancel={handleCancel}\r\n\t\t\t\tdestroyOnClose={true}\r\n\t\t\t>\r\n\t\t\t\t<Form form={form} layout=\"vertical\">\r\n\t\t\t\t\t<DebounceSelect\r\n\t\t\t\t\t\tmode=\"multiple\"\r\n\t\t\t\t\t\tname=\"search-user\"\r\n\t\t\t\t\t\tlabel=\"Tên các thành viên\"\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tplaceholder=\"Nhập tên thành viên\"\r\n\t\t\t\t\t\tfetchOptions={fetchUserList}\r\n\t\t\t\t\t\tonChange={(newValue) => setValue(newValue)}\r\n\t\t\t\t\t\tstyle={{ width: \"100%\" }}\r\n\t\t\t\t\t\tcurMembers={selectedRoom?.members}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { HashRouter as Router, Route, Switch } from \"react-router-dom\";\nimport \"./App.css\";\nimport ChatRoom from \"./components/ChatRoom\";\nimport Login from \"./components/Login\";\nimport AddRoomModal from \"./components/Modals/AddRoomModal\";\nimport InviteMemberModal from \"./components/Modals/InviteMemberModal\";\nimport AppProvider from \"./Context/AppProvider\";\nimport AuthProvider from \"./Context/AuthProvider\";\n\nfunction App() {\n\treturn (\n\t\t<Router>\n\t\t\t<AuthProvider>\n\t\t\t\t<AppProvider>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route component={Login} path=\"/login\" />\n\t\t\t\t\t\t<Route component={ChatRoom} path=\"/\" />\n\t\t\t\t\t</Switch>\n\t\t\t\t\t<AddRoomModal/>\n\t\t\t\t\t<InviteMemberModal/>\n\t\t\t\t</AppProvider>\n\t\t\t</AuthProvider>\n\t\t</Router>\n\t);\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"antd/dist/antd.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}